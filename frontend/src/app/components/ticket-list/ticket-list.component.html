<div class="w-50 container mt-5">
  <h2 class="text-center">Lista de Tickets Vendidos</h2>

  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <button class="btn btn-primary mb-3" (click)="getAllTickets()">RECUPERAR TODOS</button>

  <div class="mb-3">
    <label for="category" class="form-label">Categoría de Espectador</label>
    <select id="category" class="form-control" [(ngModel)]="filterCategory">
      <option value="l">Local</option>
      <option value="e">Extranjero</option>
    </select>
  </div>

  <button class="btn btn-secondary mb-3" (click)="getTicketsByCategory()">FILTRAR POR CATEGORÍA</button>

  <div *ngIf="tickets.length > 0" class="mt-3">
    <h3>Tickets</h3>
    <table class="table table-condensed table-striped table-bordered table-hover">
      <thead>
        <tr>
          <th style="text-align:center" scope="col">Espectador</th>
          <th style="text-align:center" scope="col">Categoría</th>
          <th style="text-align:center" scope="col">Precio</th>
          <th style="text-align:center" scope="col">Fecha</th>
          <th style="text-align:center" scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ticket of tickets">
          <td>{{ ticket.espectador.apellido }}, {{ ticket.espectador.nombre }}</td>
          <td align="center">
            {{ ticket.categoriaEspectador == 'l' ? 'Local' : 'Extranjero' }}
          </td>
          <td align="center">{{ ticket.precioTicket | number }}</td>
          <td align="center">{{ ticket.fechaCompra | date }}</td>
          <td align="center">
            <button class="btn btn-danger btn-sm" (click)="deleteTicket(ticket.id)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!--div *ngIf="tickets.length > 0" class="mt-3">
    <h3>Tickets</h3>
    <ul class="list-group">
      <li *ngFor="let ticket of tickets" class="list-group-item">
        <b>Espectador: </b>{{ ticket.espectador.apellido + ', ' + ticket.espectador.nombre }}
        <b>Categoría: </b> {{ ticket.categoriaEspectador=='l' ? 'Local' : 'Extranjero' }}
        <b>Precio: $</b> {{ ticket.precioTicket | number }}
        <b>Fecha: </b> {{ ticket.fechaCompra | date }}
        <button class="btn btn-danger btn-sm float-end" (click)="deleteTicket(ticket.id)">Eliminar</button>
      </li>
    </ul>
  </div>

  <div *ngIf="tickets.length === 0" class="mt-3">
    <p>No se encontraron tickets.</p>
  </div-->
</div>
